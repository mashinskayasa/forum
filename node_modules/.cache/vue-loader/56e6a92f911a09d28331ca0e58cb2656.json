{"remainingRequest":"C:\\project\\stylelinepost\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\project\\stylelinepost\\src\\App.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\project\\stylelinepost\\src\\App.vue","mtime":1592490636931},{"path":"C:\\project\\stylelinepost\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\project\\stylelinepost\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\project\\stylelinepost\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\project\\stylelinepost\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\project\\stylelinepost\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2FwcCB7CiAgZm9udC1mYW1pbHk6IEF2ZW5pciwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjsKICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsKICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogIzJjM2U1MDsKICBtYXJnaW4tdG9wOiA2MHB4Owp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app id=\"app\">\n    <v-app-bar app color=\"primary\" dark>\n      <h3>Часто обсуждаемые посты</h3>\n    </v-app-bar>\n    <div class=\"text-center mt-md-3\">\n      <v-btn class=\"ma-2\" tile color=\"grey lighten-4\" v-on:click=\"toggleTheme(flase)\" light>Light theme</v-btn>\n      <v-btn class=\"ma-2\" tile color=\"grey darken-3\" v-on:click=\"toggleTheme(true)\" dark>Dark theme</v-btn>\n    </div>\n    <PostListLike v-bind:postslike=\"postslike\" />\n    \n    <AddPost @add-post=\"addPost\" />\n    <v-divider />\n    <PostList v-bind:posts=\"posts\" />\n  </v-app>\n</template>\n\n<script>\nfunction randomInteger(min, max) {\n  // случайное число от min до (max+1)\n  let rand = min + Math.random() * (max + 1 - min);\n  return Math.floor(rand);\n}\nimport PostList from \"@/components/PostList\";\nimport PostListLike from \"@/components/PostListLike\";\nimport AddPost from \"@/components/AddPost\";\n\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      answers: [],\n      postsget: [],\n      newarr: [],\n      users: [],\n      counposts: 0,\n      counpostslike: 0\n    };\n  },\n\n  mounted() {\n    fetch(\"https://jsonplaceholder.typicode.com/comments?_limit=100\")\n      .then(response => response.json())\n      .then(json => {\n        setTimeout(() => {\n          this.answers = json;\n          //this.loading=false\n        }, 100);\n      });\n    fetch(\"https://randomuser.me/api/?results=100\")\n      .then(response => response.json())\n      .then(json => {\n        setTimeout(() => {\n          this.users = json;\n          //this.loading=false\n        }, 100);\n      });\n  },\n  computed: {    \n    postslike: {\n      get: function() {\n        this.counpostslike++;\n        var newarrpostlike = this.posts.slice();\n        newarrpostlike.sort((a, b) => {\n          let compare = 0;\n          if (a.countanswer > b.countanswer) {\n            compare = -1;\n          } else if (b.countanswer > a.countanswer) {\n            compare = 1;\n          }\n          return compare;\n        });\n\n        if (this.counpostslike===0)\n          {\n            if (localStorage.getItem('postslike')) {\n            try {\n              var postsgetl = JSON.parse(localStorage.getItem('postslike')); //взять из хранилища                             \n               if (postsgetl.length>0) {\n                 this.newarrpostlike = postsgetl.slice();   //из хранилища\n               }                                      \n               } catch(e) {\n                \n                 localStorage.removeItem('postslike');\n               }\n            }\n          }\n          else{\n            const parsed = JSON.stringify(newarrpostlike\n            .filter(newarrpostlike => newarrpostlike.countanswer > 0).slice(-3));\n            localStorage.setItem('postslike', parsed);   //забросить в хранилище\n          }\n\n         this.counpostslike++;\n        //return newarrpostlike.filter(newarrpostlike => newarrpostlike.countanswer > 0)\n        return newarrpostlike\n          .filter(newarrpostlike => newarrpostlike.countanswer > 0)\n          .slice(-3); //последник 3\n      }\n    },\n    posts: {\n      get: function() {        \n         if (this.counposts===0)\n          {\n            \n            if (localStorage.getItem('posts')) {\n            try {\n              var postsgetl = JSON.parse(localStorage.getItem('posts')); //взять из хранилища \n                if (postsgetl.length>0)\n                {                  \n                  this.postsget = postsgetl.slice();   //из хранилища                  \n                }                                                   \n               } catch(e) {                \n                 localStorage.removeItem('posts');\n               }\n            }\n          }\n        \n        \n        var newarr3 = this.postsget.slice();\n        var newarr2 = [];\n\n        for (var nn in newarr3) {\n          if (this.newarr[0] != undefined) {\n            if (this.newarr[0].id == newarr3[nn].id) {\n              // из this.newarr\n              newarr2.push({\n                id: this.newarr[0].id,\n                title: this.newarr[0].title,\n                answer1: this.newarr[0].answer1,\n                answer2: this.newarr[0].answer2,\n                answer3: this.newarr[0].answer3,\n                user1: newarr[0].user1,\n                avatar1: newarr[0].avatar1,\n                user2: newarr[0].user2,\n                avatar2: newarr[0].avatar2,\n                user3: newarr[0].user3,\n                avatar3: newarr[0].avatar3,\n                user: newarr[0].user,\n                avatar: newarr[0].avatar,\n                countanswer: newarr[0].countanswer,\n                posthref: newarr[0].posthref\n              });\n            } else {\n              newarr2.push({\n                id: newarr3[nn].id,\n                title: newarr3[nn].title,\n                answer1: newarr3[nn].answer1,\n                answer2: newarr3[nn].answer2,\n                answer3: newarr3[nn].answer3,\n                user1: newarr3[nn].user1,\n                avatar1: newarr3[nn].avatar1,\n                user2: newarr3[nn].user2,\n                avatar2: newarr3[nn].avatar2,\n                user3: newarr3[nn].user3,\n                avatar3: newarr3[nn].avatar3,\n                user: newarr3[nn].user,\n                avatar: newarr3[nn].avatar,\n                countanswer: newarr3[nn].countanswer,\n                posthref: newarr3[nn].posthref\n              });\n            }\n          } else {\n            newarr2.push({\n              id: newarr3[nn].id,\n              title: newarr3[nn].title,\n              answer1: newarr3[nn].answer1,\n              answer2: newarr3[nn].answer2,\n              answer3: newarr3[nn].answer3,\n              user1: newarr3[nn].user1,\n              avatar1: newarr3[nn].avatar1,\n              user2: newarr3[nn].user2,\n              avatar2: newarr3[nn].avatar2,\n              user3: newarr3[nn].user3,\n              avatar3: newarr3[nn].avatar3,\n              user: newarr3[nn].user,\n              avatar: newarr3[nn].avatar,\n              countanswer: newarr3[nn].countanswer,\n              posthref: newarr3[nn].posthref\n            });\n          }\n        }\n        \n        if ((this.counposts>0)&&(newarr2.length>0))\n        {           \n          const parsed = JSON.stringify(newarr2);\n          localStorage.setItem('posts', parsed);   //забросить в хранилище\n        }\n        this.counposts++;\n        return newarr2;\n      },\n      // сеттер:\n      set: function(newValue) {\n        this.newarr = newValue.slice();\n      }\n    }\n  },\n  methods: {\n    addPost(post) {\n      this.postsget.push(post);\n\n      let newarr = [];\n      let coutime = 1000;\n\n      let current = 1;\n      let curanswer = 1;\n\n      //alert(newarr);\n      let answerq = this.answers;\n      let users = this.users;\n      newarr.push(post);\n      newarr[0].user =\n        users.results[1].name.last + \" \" + users.results[1].name.ferst;\n      newarr[0].avatar = users.results[1].picture.thumbnail;\n      coutime = randomInteger(1, 30) * 1000;\n      let i = 1;\n      setTimeout(function go() {\n        var num = randomInteger(2, 100); //1- резерв ведущего\n        if ((users.results[num] != undefined) & (answerq[num] != undefined)) {\n          switch (curanswer) {\n            case 1:\n              newarr[0].answer1 = answerq[num].body;\n              newarr[0].user1 =\n                users.results[num].name.last +\n                \" \" +\n                users.results[num].name.ferst;\n              newarr[0].avatar1 = users.results[num].picture.thumbnail;\n\n              break;\n\n            case 2:\n              newarr[0].answer2 = answerq[num].body;\n              newarr[0].user2 =\n                users.results[num].name.last +\n                \" \" +\n                users.results[num].name.ferst;\n              newarr[0].avatar2 = users.results[num].picture.thumbnail;\n              break;\n            case 3:\n              newarr[0].answer3 = answerq[num].body;\n              newarr[0].user3 =\n                users.results[num].name.last +\n                \" \" +\n                users.results[num].name.ferst;\n              newarr[0].avatar3 = users.results[num].picture.thumbnail;\n              break;\n            default:\n              newarr[0].answer1 = newarr[0].answer2;\n              newarr[0].user1 = newarr[0].user2;\n              newarr[0].avatar1 = newarr[0].avatar2;\n              newarr[0].answer2 = newarr[0].answer3;\n              newarr[0].user2 = newarr[0].user3;\n              newarr[0].avatar2 = newarr[0].avatar3;\n              newarr[0].answer3 = answerq[num].body;\n              newarr[0].user3 =\n                users.results[num].name.last +\n                \" \" +\n                users.results[num].name.ferst;\n              newarr[0].avatar3 = users.results[num].picture.thumbnail;\n\n              break;\n          }\n          newarr[0].countanswer++;\n        }\n\n        coutime = randomInteger(1, 30) * 1000;\n        if (i < 100000) {\n          //ограничение по кол-ву вызова\n          setTimeout(go, coutime);\n        }\n        i++;\n        curanswer++;\n        if (curanswer > 3) {\n          //curanswer=1;\n        }\n      }, coutime);\n    },\n    toggleTheme(to) {\n      this.$vuetify.theme.dark = Boolean(to);\n      // save localStorage\n    },\n  },\n  components: {\n    PostList,\n    PostListLike,\n    AddPost\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n"]}]}